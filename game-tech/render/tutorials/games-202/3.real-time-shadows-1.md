# Real time Shadows  1

## The math behind shadow mapping

实时渲染中，把不等式在一定条件下看成近似相等

重要公式：把两个函数，乘积的积分，拆成，积分的乘积
$$
∫_Ω f(x)g(x)dω 	\approx \frac{∫_Ωf(x)dx}{∫_Ωdx} \cdot ∫_Ωg(x)dx
$$
分母，归一化的常数，让 f(x) 的积分能量守恒

#### 条件

g(x) low support, low smooth : 实际的积分域小，变动小，两个满足一个即可

### 在阴影渲染中

![image-20230201204811533](https://image-1253155090.cos.ap-nanjing.myqcloud.com/202302012048598.png)

#### 硬阴影的理论基础：

f(x) 用 V 表示，实际上是 Shadow Test，g(x) 是全局光线积分，其在单光线直接光，Diffuse 材质的时候积分域最小并且 smooth。

如果是 glossy 材质并且对全局环境光积分，此时该方程是最不准的 

